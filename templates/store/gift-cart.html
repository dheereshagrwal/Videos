{% extends 'base.html' %} {% load static %} {% block content %}
<section class="section-content padding-y bg">
  <div class="container">
    <!-- ============================ COMPONENT 1 ================================= -->
    {% if not cart_items %}
    <h2 class="text-center">Your Shopping Cart is Empty</h2>
    <br />
    <div class="text-center">
      <a href="{% url 'store' %}" class="btn btn-primary">Continue Shopping</a>
    </div>
    {% else %}
    <div class="row">
      <aside class="col-lg-4">
        <div class="card">
          <table class="table table-borderless table-shopping-cart">
            <thead class="text-muted">
              <tr class="small text-uppercase">
                <th scope="col">Product</th>
                <th scope="col" width="120">Price</th>
              </tr>
            </thead>
            <tbody>
              {% for cart_item in cart_items %}
              <!-- - -->
              {% with ''|center:cart_item.quantity as range %}
              <!-- - -->
              {% for _ in range %}
              <tr>
                <td>
                  <figure class="itemside align-items-center">
                    <div class="aside">
                      <a href="{{cart_item.product.get_url}}"><img src="{{ cart_item.product.images.url }}" class="img-sm" /></a>
                    </div>

                    <figcaption class="info">
                      <a href="{{cart_item.product.get_url}}" class="title text-dark">{{ cart_item.product.product_name }}</a>
                      <p class="text-muted small">
                        <!-- for loop -->
                        {% for item in cart_item.variations.all %}
                        <!-- - -->
                        {{item.variation_category | capfirst}} : {{item.variation_value | capfirst}} <br />
                        <!-- - -->
                        {% endfor %}
                        <!-- - -->
                      </p>
                    </figcaption>
                  </figure>
                </td>
                <td></td>
                <td>
                  <div class="price-wrap">
                    <small class="text-muted">&#8377; {{cart_item.product.price}} each</small>
                  </div>
                </td>
              </tr>
              {% endfor %}
              <!-- - -->
              {% endwith %}
              <!-- - -->
              {% endfor %}
            </tbody>
          </table>
        </div>
        <!-- card.// -->
      </aside>

      <!-- !temporary   -->

      <aside class="col-lg-3">
        <table class="table">
          <form action="{% url 'gift_cart' %}" method="POST">
            {% csrf_token %}
            <!-- - -->
            {% for gift_check in gift_checks %}
            <!-- - -->
            {% if gift_check == "true" %}
            <div class="form-check">
              <input type="checkbox" name="gift_check" value="true" checked />
            </div>
            {% else %}
            <div class="form-check">
              <input type="checkbox" name="gift_check" value="true" />
            </div>
            {% endif %}
            <!-- - -->
            {% endfor %}
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </table>
        <!-- card.// -->
      </aside>

      <!-- !temporary   -->
      <aside class="col-lg-3">
        <div class="card">
          <div class="card-body">
            <dl class="dlist-align">
              <dt>Total price:</dt>
              <dd class="text-right">&#8377; {{total}}</dd>
            </dl>
            <dl class="dlist-align">
              <dt>Delivery Charge:</dt>
              <dd class="text-right">&#8377; {{delivery_charge}}</dd>
            </dl>
            <dl class="dlist-align">
              <dt>Tax:</dt>
              <dd class="text-right">&#8377; {{tax}}</dd>
            </dl>

            <dl class="dlist-align">
              <dt>Gift Charge:</dt>
              <dd class="text-right text-dark b">
                <strong>&#8377; {{gift_charge}}</strong>
              </dd>
            </dl>
            <dl class="dlist-align">
              <dt>Grand Total:</dt>
              <dd class="text-right text-dark b">
                <strong>&#8377; {{grand_total}}</strong>
              </dd>
            </dl>
            <hr />
            <p class="text-center mb-3">
              <img src="{% static './images/misc/payments.png' %}" height="26" />
            </p>
            <a href="{% url 'checkout' %}" class="btn btn-primary btn-block"> Checkout </a>
            <a href="{% url 'store' %}" class="btn btn-light btn-block">Continue Shopping</a>
          </div>
          <!-- card-body.// -->
        </div>
        <!-- card.// -->
      </aside>
      <!-- col.// -->
    </div>
    {% endif %}
    <!-- row.// -->
    <!-- ============================ COMPONENT 1 END .// ================================= -->
  </div>
  <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->
{% endblock %}
